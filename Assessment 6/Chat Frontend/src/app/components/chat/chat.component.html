<app-navbar></app-navbar>

<div class="bg-light">
  <div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="chat-container p-4 border rounded shadow-lg bg-white">
      <h1 class="mb-4">Hi, {{ userName | titlecase }}</h1>

      <ng-container>
        <!-- Chat Box -->
        <div class="chat-box mb-3" id="chatBox">
          <ul class="list-group list-group-flush">
            <li *ngFor="let msg of messages; let i = index" class="list-group-item">
              <!-- User message on the right, other user on the left -->
              <div class="d-flex" [ngClass]="{'justify-content-end': msg.startsWith(userName), 'justify-content-start': !msg.startsWith(userName)}">
                <!-- Message content -->
                <div [ngClass]="{'bg-success text-white': msg.startsWith(userName), 'bg-primary text-white': !msg.startsWith(userName)}" 
                     class="message p-2 rounded-3">
                  {{ msg }}
                </div>
              </div>
            </li>
          </ul>
        </div>

        <!-- Input form -->
        <div class="mb-3">
          <input type="text" [(ngModel)]="message" class="form-control" placeholder="Type your message..." />
        </div>
        
        <!-- Send Message Button -->
        <button type="button" (click)="onMessageSent()" [disabled]="!message" class="btn btn-primary mb-3 w-100">
          Send Message
        </button>
      </ng-container>
    </div>
  </div>



  <script>
    // Scroll the chat box to the bottom when new messages are added
    const chatBox = document.getElementById('chatBox');
    chatBox.scrollTop = chatBox.scrollHeight;
  </script>
</div>
