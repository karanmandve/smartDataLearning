<div class="container mt-5">
    <div class="card shadow-sm p-3 mb-5 rounded-3" style="background-color: #ffffff; border: none;">
      <div class="row align-items-center">
        <!-- Profile Image -->
        <div class="col-md-3 d-flex justify-content-center mb-4 mb-md-0">
          <img src="{{ appointment.profileImageUrl }}" alt="Profile Image" class="img-fluid rounded-circle" style="max-width: 150px; height: auto;">
        </div>
        <!-- appointment Details -->
        <div class="col-md-9">
          <div class="card-body">
            <h5 class="card-title fw-bold">{{ appointment.appointmentName }}</h5>
            <p class="card-text text-muted"><strong>Age:</strong> {{ appointment.age }} years</p>
            <p class="card-text text-muted"><strong>Gender:</strong> {{ userDetails.gender }}</p>
            <p class="card-text"><strong>Appointment Date:</strong> {{ appointment.appointmentDate }}</p>
            <p class="card-text"><strong>Appointment Time:</strong> {{ appointment.appointmentTime }}</p>
            <p class="card-text"><strong>Chief Complaint:</strong> {{ appointment.chiefComplaint }}</p>
          </div>
        </div>
      </div>
    </div>
  
    <!-- SOAP Notes Form -->
    <form [formGroup]="soapForm" (ngSubmit)="onSubmit()" class="mb-5">
      <h4 class="mb-4">SOAP Notes</h4>
  
      <div class="row g-3">
        <!-- Subjective -->
        <div class="col-md-6">
          <label for="subjective" class="form-label"><strong>Subjective</strong></label>
          <textarea minlength="10" maxlength="400" id="subjective" class="form-control" formControlName="subjective" rows="4" placeholder="appointment's statement about the condition..." required></textarea>
          <div *ngIf="soapForm.get('subjective')?.invalid && soapForm.get('subjective')?.touched" class="text-danger">
            <div *ngIf="soapForm.get('subjective')?.hasError('required')">Subjective field is required.</div>
            <div *ngIf="soapForm.get('subjective')?.hasError('minlength')">Subjective must be at least 10 characters long.</div>
            <div *ngIf="soapForm.get('subjective')?.hasError('maxlength')">Subjective cannot exceed 400 characters.</div>
          </div>
        </div>
  
        <!-- Objective -->
        <div class="col-md-6">
          <label for="objective" class="form-label"><strong>Objective</strong></label>
          <textarea minlength="10" maxlength="400" id="objective" class="form-control" formControlName="objective" rows="4" placeholder="Therapist's observations..." required></textarea>
          <div *ngIf="soapForm.get('objective')?.invalid && soapForm.get('objective')?.touched" class="text-danger">
            <div *ngIf="soapForm.get('objective')?.hasError('required')">Objective field is required.</div>
            <div *ngIf="soapForm.get('objective')?.hasError('minlength')">Objective must be at least 10 characters long.</div>
            <div *ngIf="soapForm.get('objective')?.hasError('maxlength')">Objective cannot exceed 400 characters.</div>
          </div>
        </div>
  
        <!-- Assessment -->
        <div class="col-md-6">
          <label for="assessment" class="form-label"><strong>Assessment</strong></label>
          <textarea minlength="10" maxlength="400" id="assessment" class="form-control" formControlName="assessment" rows="4" placeholder="Therapist's analysis..." required></textarea>
          <div *ngIf="soapForm.get('assessment')?.invalid && soapForm.get('assessment')?.touched" class="text-danger">
            <div *ngIf="soapForm.get('assessment')?.hasError('required')">Assessment field is required.</div>
            <div *ngIf="soapForm.get('assessment')?.hasError('minlength')">Assessment must be at least 10 characters long.</div>
            <div *ngIf="soapForm.get('assessment')?.hasError('maxlength')">Assessment cannot exceed 400 characters.</div>
          </div>
        </div>
  
        <!-- Plan -->
        <div class="col-md-6">
          <label for="plan" class="form-label"><strong>Plan</strong></label>
          <textarea minlength="10" maxlength="400" id="plan" class="form-control" formControlName="plan" rows="4" placeholder="Plan for treatment..." required></textarea>
          <div *ngIf="soapForm.get('plan')?.invalid && soapForm.get('plan')?.touched" class="text-danger">
            <div *ngIf="soapForm.get('plan')?.hasError('required')">Plan field is required.</div>
            <div *ngIf="soapForm.get('plan')?.hasError('minlength')">Plan must be at least 10 characters long.</div>
            <div *ngIf="soapForm.get('plan')?.hasError('maxlength')">Plan cannot exceed 400 characters.</div>
          </div>
        </div>
      </div>
  
      <!-- Submit Button -->
      <div class="d-flex justify-content-end mt-4">
        <button type="submit" class="btn btn-primary" [disabled]="soapForm.invalid">Save SOAP Notes</button>
      </div>
    </form>
  </div>
  